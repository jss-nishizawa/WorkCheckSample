# 🚀 はじめに - 5分でわかるWorkCheck PWA

初めてこのプロジェクトに触れる方向けのガイドです。

## 📖 このアプリは何？

**作業確認アプリ** = 現場作業のチェックリストをデジタル化するアプリ

- ✅ チェック項目に印をつける
- ✏️ デジタル署名を取得
- 📄 その場でPDF生成
- 💾 履歴を自動保存
- 📱 **オフラインでも動作**（重要！）

---

## 🎯 どんな時に使う？

### 使用シーン

1. **工事現場での作業確認**
   - ネットワークがない場所でも動作
   - タブレットやスマホで使える
   - その場で署名・印刷

2. **設備点検**
   - チェック項目を記録
   - 写真付き報告（今後の機能）
   - 過去の履歴を確認

3. **安全確認**
   - 作業前チェック
   - 複数人での確認（署名）
   - PDF保存で記録保持

---

## 📁 触るべきファイルはこれだけ！

初心者が編集するのは主に**この3つ**だけ：

### 1. チェック項目の変更

**ファイル**: `src/assets/checklist.template.json`

```json
{
  "templateName": "作業確認チェックリスト",
  "items": [
    {
      "id": "item1",
      "label": "安全確認を実施しましたか",
      "hasRemark": true
    },
    {
      "id": "item2",
      "label": "必要な工具を準備しましたか",
      "hasRemark": false
    }
  ]
}
```

**変更例**:
```json
{
  "id": "item3",
  "label": "作業完了後の片付けをしましたか",
  "hasRemark": true
}
```
項目を追加するだけ！

### 2. ロゴの変更

**ファイル**: 
- `src/assets/logo.svg` （ヘッダーのロゴ）
- `public/icons/icon.svg` （アプリアイコン）

SVGファイルを上書きするだけ！

### 3. 色やデザインの変更

**ファイル**: `src/styles.css`

```css
/* メインカラー */
.app-header {
  background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
  /* ↑ この色を変更 */
}
```

---

## 🔧 環境構築（初回のみ）

### 1. Node.jsのインストール

https://nodejs.org/ から最新版をダウンロード

### 2. 依存パッケージのインストール

```bash
cd C:\!Project\!Apps\WorkCheckPWAOffline
npm install
```

これで準備完了！

---

## 💻 開発の流れ

### 開発モード（編集しながら確認）

```bash
npm run dev
```

- ブラウザで `http://localhost:5173/` を開く
- ファイルを編集すると自動的に画面が更新される
- **注意**: オフライン機能は開発モードでは動作しません

### 本番ビルド

```bash
npm run build
```

- `dist/` フォルダに最適化されたファイルが生成される
- このフォルダをサーバーにデプロイ

### プレビュー（ビルド結果を確認）

```bash
npm run preview
```

- ビルドしたアプリをローカルで確認
- オフライン機能もテストできる

---

## 🚀 デプロイ（本番環境へ）

### Windows + IIS の場合

```powershell
# PowerShellを管理者として実行
.\deploy-to-iis.ps1
```

これだけで完了！

### Linux + Apache の場合

```bash
chmod +x deploy-to-apache.sh
./deploy-to-apache.sh
```

---

## 📱 スマホ・タブレットで使う

### iPhone/iPad の場合

1. **PC側**: HTTPS設定
   ```powershell
   .\setup-https-iis.ps1
   ```

2. **iPhone側**: Safariでアクセス
   ```
   https://192.168.1.XXX/
   ```
   （XXXはPC側で表示されたIPアドレス）

3. **インストール**: ホーム画面に追加

4. **オフライン使用**: Wi-Fiを切ってもアプリが動く！

詳しくは → `QUICK_START_MOBILE.md`

---

## 🔍 よくある質問

### Q: オフラインって本当に動くの？

**A**: はい！ただし**初回アクセス時のみネットワークが必要**です。

1. オンライン状態でアクセス → アプリが自動でキャッシュされる
2. オフライン状態 → キャッシュから起動、完全に動作
3. オンラインに戻る → 自動で最新版に更新

### Q: データはどこに保存される？

**A**: ブラウザ内（IndexedDB）に保存されます。

- ✅ オフラインでも読み書き可能
- ⚠️ ブラウザのキャッシュクリアで消える
- ⚠️ 異なるデバイス間では同期されない
- 💡 重要なデータはPDF出力を推奨

### Q: iPhone/iPadで使うにはHTTPSが必須？

**A**: はい。Safari（iOS）の仕様で、PWAとService WorkerはHTTPSでのみ動作します。

- `setup-https-iis.ps1` で簡単に設定できます
- 自己署名証明書でOK（社内利用）

### Q: チェック項目を変更したらどうする？

**A**: ファイル編集 → ビルド → デプロイ

```bash
# 1. ファイル編集
vi src/assets/checklist.template.json

# 2. ビルド
npm run build

# 3. デプロイ
.\deploy-to-iis.ps1
```

### Q: エラーが出た！

**A**: まずは以下を確認：

1. **開発時**
   ```bash
   npm run dev
   ```
   ブラウザのコンソール（F12）を確認

2. **ビルド時**
   ```bash
   npm run build
   ```
   エラーメッセージを確認

3. **デプロイ時**
   - IISが起動しているか
   - 管理者権限で実行したか
   - ファイアウォール設定は正しいか

---

## 📚 もっと詳しく知りたい

### ドキュメント一覧

| ファイル | 内容 | 対象者 |
|---------|------|--------|
| `GETTING_STARTED.md` | このファイル | 初心者 |
| `QUICK_START_MOBILE.md` | モバイル利用（簡易版） | 全員 |
| `MOBILE_GUIDE.md` | モバイル利用（詳細版） | 中級者 |
| `FILE_GUIDE.md` | 全ファイルの説明 | 開発者 |
| `PROJECT_STRUCTURE.txt` | プロジェクト構成図 | 開発者 |
| `README.md` | 完全ガイド | 全員 |

### 学習の順序

1. `GETTING_STARTED.md` （このファイル） ← まずはここから
2. `QUICK_START_MOBILE.md` ← スマホで使うなら
3. `FILE_GUIDE.md` ← コードを理解したくなったら
4. `README.md` ← 全機能を知りたくなったら

---

## 🎓 次のステップ

### 初級編

1. チェック項目を1つ追加してみる
2. ローカルでビルドして確認
3. 開発サーバーで動作確認

### 中級編

1. デザイン（色）を変更してみる
2. IISにデプロイしてみる
3. iPhone/iPadでアクセスしてみる

### 上級編

1. 新しい画面を追加
2. データベース構造を変更
3. オフライン機能をカスタマイズ

---

## 💡 ヒント

### 困った時は

1. **ブラウザの開発者ツール**（F12）
   - コンソール: エラーメッセージ
   - Network: 通信状況
   - Application: Service Worker状態

2. **ファイルを確認**
   - エラーメッセージに表示されたファイル名
   - 行番号を確認

3. **再起動**
   - 開発サーバーを再起動
   - ブラウザをリロード（Ctrl+Shift+R）
   - IISを再起動

### 便利なコマンド

```bash
# 全部削除して再インストール
rm -rf node_modules package-lock.json
npm install

# ビルドキャッシュをクリア
rm -rf dist
npm run build

# ポート確認（Windowsの場合）
netstat -ano | findstr :5173
```

---

## ✅ チェックリスト

開発環境が整っているか確認：

- [ ] Node.jsがインストールされている（`node --version`）
- [ ] npmが使える（`npm --version`）
- [ ] `npm install` が完了
- [ ] `npm run dev` で開発サーバーが起動
- [ ] ブラウザでアプリが表示される

デプロイ準備ができているか確認：

- [ ] IISがインストールされている
- [ ] URL Rewriteモジュールがインストール済み
- [ ] 管理者権限のPowerShellで実行できる
- [ ] `npm run build` が成功する

モバイル準備ができているか確認：

- [ ] HTTPSが設定されている
- [ ] ファイアウォールでポート443が開いている
- [ ] PCとスマホが同じWi-Fiに接続
- [ ] スマホでアクセスできる

---

これで準備完了！実際にコードを触ってみましょう！ 🎉

何かわからないことがあれば、各種ドキュメントを参照してください。

